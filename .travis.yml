language: sh
dist:     trusty
sudo:     true
install:
  - export PATH=$HOME/shpec/bin:$TRAVIS_BUILD_DIR/lib:$PATH
  - git archive --format=tar.gz --remote=git://github.com/rylnd/shpec 0.2.2 | tar xzf -
  - git archive --format=tar.gz --remote=git://github.com/nixos/nixpkgs-channels 2ed5c2b | tar xzf -
  - wget https://nixos.org/releases/nix/nix-1.11.9/nix-1.11.9-x86_64-linux.tar.bz2
  - tar xjf nix-1.11.9-x86_64-linux.tar.bz2
  - nix-1.11.9-x86_64-linux/install
  - source "$HOME"/.nix-profile/etc/profile.d/nix.sh
  - nix-env -ib -f default.nix bash
script:   ./all-shpecs
git:
  depth:  1
